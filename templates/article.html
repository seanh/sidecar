{% extends "base.html" %}

{% block html_lang %}{{ article.lang }}{% endblock %}

{% block title %}{{ super() }} - {{ article.title|striptags  }}{% endblock title %}

{% if source_url is not defined %}
  {% set source_url %}{{ SITEURL }}/{{ (ARTICLE_SOURCE_URL or '{article.slug}{OUTPUT_SOURCES_EXTENSION}').format(article=article, OUTPUT_SOURCES_EXTENSION=OUTPUT_SOURCES_EXTENSION) }}{% endset %}
{% endif %}

{% block head %}
  {{ super() }}
  {% if OUTPUT_SOURCES %}
    <link rel="alternate" type="text/plain" href="{{ source_url }}">
  {% endif %}
{% endblock %}

{% set anchors = true %}

{% block content %}
  {% block article %}
    {% include "includes/tagline.html" %}

    {% set heading %}
      <h1 class="noanchor">{{ article.title }}</h1>
    {% endset %}

    {% if article.metadata.subheading %}
      <hgroup>
        {{ heading }}
        {% if "subheading" in FORMATTED_FIELDS %}
          {{ article.metadata.subheading }}
        {% else %}
          <p>{{ article.metadata.subheading|join(" ") }}</p>
        {% endif %}
      </hgroup>
    {% else %}
      {{ heading }}
    {% endif %}

    {{ article.content }}
  {% endblock %}
{% endblock %}
